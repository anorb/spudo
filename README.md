# Spudo
Spudo helps build a Discord bot that utilizes plugins to add functionality. Built using [DiscordGo](https://github.com/bwmarrin/discordgo).

## Creating a bot
### Create a config
The config uses the [TOML](https://github.com/toml-lang/toml) format. If you don't make one, you will be prompted to and the default settings will be used.
```toml
# Token generated by discord for your bot (Required)
Token="SAKkj343jnNajw429Je"
# Default channel for welcome back/timed messages to be sent in (Required)
DefaultChannelID="5432188465698448"

# Prefix used to determine when a command is issued (Optional, default: !)
CommandPrefix="$"
# Seconds that must elapse before a user can issue another command (Optional, default: 10)
CooldownTimer=5
# Message that will be sent when a user tries to issue too many commands in a short time (Optional, default: Too many commands at once!)
CooldownMessage="You have used too many commands"
# Message bot will send when it conects or reconnects (Optional, default: I'm back!)
WelcomeBackMessage="I'm back"
# Message that will be sent when a user issues an invalid command (Optional, default: Invalid command!)
UnknownCommandMessage="Command is invalid"
```
### Create bot
```go
package main

import (
	"github.com/anorb/spudo"
	_ "github.com/anorb/spudo/examples/plugins/hello"
	_ "github.com/anorb/spudo/examples/plugins/ping"
)

func main() {
	bot := spudo.NewBot()
	bot.Start()
}
```
That's it. Plugins are imported and added to the bot. Everything else is handled through the plugin system.
Example can be found [here](./examples/bot).

## Basic plugin
### Create the plugin
```go
package ping

import (
	"github.com/anorb/spudo"
)

func ping(args []string) interface{} {
	return "Pong!"
}

func init() {
	spudo.AddCommandPlugin("ping", "responds with pong", ping)
}
```
### Import plugin to bot with underscore
```go
_ "github.com/anorb/spudo/examples/plugins/ping"
```
Examples of the different kinds of plugins can be found [here](./examples/plugins).

## FAQ

### What kind of plugins can be made?

- [Return a string response to a command](./examples/plugins/ping/ping.go)
- [Return a Discord embed message to a command](./examples/plugins/embed/embed.go)
- [Add reactions to specific user's messages](./examples/plugins/userreaction/userreaction.go)
- [Add reactions to a message containing specific strings](./examples/plugins/messagereaction/messagereaction.go)
- [Send a message (string or embed) at specific time](./examples/plugins/fiveseconds/fiveseconds.go)
  - The second argument in this example uses [cron-style](https://en.wikipedia.org/wiki/Cron) strings to define when the messages should be sent

### What if I want to put the config.toml file somewhere else?
```sh
./bot -config=./path/to/wherever
```
